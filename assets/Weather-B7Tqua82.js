import{d as v,g as y,i as k,c as C,u as g,a as c,o as r,b as s,e as w,f as e,t as i,_ as x}from"./index-BtpIgSBz.js";import{u as B}from"./user-4z4REQeR.js";const S={class:"widget"},b={key:0,class:"state"},D={key:1,class:"state error"},I={key:2},N={class:"row"},U={class:"city"},V={class:"temp"},W={class:"desc"},E=v({__name:"Weather",props:{defaultCity:{}},setup(_){const p=_,u=B(),n=y(p.defaultCity||"Moscow");k(()=>u.city,o=>{o&&o!==n.value&&(n.value=o)},{immediate:!0});const m=C(()=>`/api/weather?city=${encodeURIComponent(n.value)}`),{data:t,loading:f,error:d,refetch:l}=g(m);return(o,a)=>(r(),c("div",S,[a[1]||(a[1]=s("h3",{class:"title"},"Погода",-1)),e(f)?(r(),c("div",b,"Загрузка погоды…")):e(d)?(r(),c("div",D,"Ошибка: "+i(e(d).message),1)):e(t)?(r(),c("div",I,[s("div",N,[s("span",U,i(e(t).city),1),s("span",V,i(e(t).temperature)+"°C",1),s("span",W,i(e(t).description),1)]),s("button",{class:"refresh",onClick:a[0]||(a[0]=(...h)=>e(l)&&e(l)(...h))},"Обновить")])):w("",!0)]))}}),R=x(E,[["__scopeId","data-v-cf94e9c8"]]);export{R as default};
