import{d as v,g as y,i as k,c as C,u as g,a as c,o as r,b as t,e as w,f as e,t as i,_ as x}from"./index-lljqORFO.js";import{u as B}from"./user-NsucZTBV.js";const S={class:"widget"},b={key:0,class:"state"},D={key:1,class:"state error"},I={key:2},N={class:"row"},U={class:"city"},V={class:"temp"},W={class:"desc"},E=v({__name:"Weather",props:{defaultCity:{}},setup(_){const p=_,u=B(),n=y(p.defaultCity||"Moscow");k(()=>u.city,o=>{o&&o!==n.value&&(n.value=o)},{immediate:!0});const m=C(()=>`/test-itv/api/weather?city=${encodeURIComponent(n.value)}`),{data:s,loading:f,error:d,refetch:l}=g(m);return(o,a)=>(r(),c("div",S,[a[1]||(a[1]=t("h3",{class:"title"},"Погода",-1)),e(f)?(r(),c("div",b,"Загрузка погоды…")):e(d)?(r(),c("div",D,"Ошибка: "+i(e(d).message),1)):e(s)?(r(),c("div",I,[t("div",N,[t("span",U,i(e(s).city),1),t("span",V,i(e(s).temperature)+"°C",1),t("span",W,i(e(s).description),1)]),t("button",{class:"refresh",onClick:a[0]||(a[0]=(...h)=>e(l)&&e(l)(...h))},"Обновить")])):w("",!0)]))}}),R=x(E,[["__scopeId","data-v-efdc416a"]]);export{R as default};
